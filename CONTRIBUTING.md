# Contributing Guidelines

Mungit is a fork of Ungit and the main motivations are to have a personal flavour of it. Altough all pull requests are warmly welcome to the development branch in this repo, it is encouraged to seek and help out the [original project](https://github.com/FredrikNoren/ungit) - unless, of course, you see the benefits of changes made in mungit.

### What you need to get started

You'll need the same as for Mungit; node, npm, and git. You will also need grunt (`npm install -g grunt-cli`).

### Getting started

To get started developing on Mungit:

 1. Make sure you have [node.js](https://nodejs.org/), [npm](https://www.npmjs.com/) and [git](https://git-scm.com/) installed.
 2. Clone the repository to a local directory.
 3. Run `npm install` to install dependencies.
 4. Run `npm run build` to build (compile templates, CSS and JS).
 5. Type `npm start` to start ungit, or `npm test` to run tests.
 6. (Optional). Run `npm run watch` to automatically rebuild stuff when you change files.

### Run Mungit as a standalone application

To provide easier access to launch ungit, very early stage of standalone application container using [electron](https://electronjs.org/) is available.
Please note this is not yet ready for public release and being developed having several known & unknown limitations.

#### To get started

 1. Follow steps in 'Getting started' to get a development environment ready.
 2. Run `grunt default && grunt package`. This will compile latest ungit and will create a standalone application package under `build/`

#### Known limitations

 1. The current standalone application does not allow you to execute more than one instance.
 2. There is no installer package neither automatic update mechanism for standalone application in place yet.

#### Additional notes

 1. To create windows package with proper application description on a non-windows platform, [wine](https://www.winehq.org/) is required to be installed. If not, the windows package will be created with default resources.

### Architecture overview

Ungit has two major parts; the server and the UI. The server exposes a REST interfaces, which enables it to be run on a remote server. The UI is a single-page web-app, built using Knockout.js.

### Folders

- `assets/` Raw assets used for development.
- `bin/` "Binary" files, the ungit launcher script and the credentials-helper, which is invoked by git to acquire credentials when using http authentication.
- `clicktests/` Phantom.js click test; basically tests that run on the rendered DOM. Since these run all the way, from the DOM down to the server, they're also the most powerful of the tests.
- `components/` This directory contains all view components for Ungit, each of them exposed as an Ungit plugin.
- `public/` The UI web-app.
- `public/css/` CSS generated by the grunt script.
- `public/fonts/` & `public/images` Assets, some of which are compiled into the CSS by the grunt script, others (for instance those that are too large to compile into the CSS efficiently) are served directly.
- `public/js/` An ungit.js file generated by the grunt script, as well as raven files which handle exception logging.
- `public/less/` Less files, which are the "source" used to generate the CSS.
- `public/source/` Javascript source code, which is turned into the public/js/ungit.js file by the grunt script.
- `public/vendor/` Various 3rd-party libs.
- `source/` Server and shared (i.e. used by both server and UI) source code.
- `test/` Unit tests and REST interface tests.

### Running tests

`grunt test` will run both unit tests, REST-interface tests, and click tests. `grunt unittest` only runs the tests in the test/ folder, `grunt clicktest` runs only the tests in the clicktests/ folder. Install mocha (`npm install -g mocha`) to run specific tests in the test folder and get better stack traces: `mocha test/spec.git-api.js`.

### Things to consider when developing

- Try to make everything as touch friendly as possible, for instance, no mouse over tooltips (try to make it clear without that). Everything doesn't adhere 100% to that right now but I'm trying to move it more in that direction.
- Write tests. The most important tests to write are usually the click tests since they will cover the most code (both UI and backend).
